<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>TASTER processing tool</title>
<script lang="javascript" src="vendor/jszip.min.js"></script>
<script lang="javascript" src="vendor/filesaver.js"></script>
<script src="Process.js"></script>
</head>
<body>
<form id="jsonFile" name="jsonFile" enctype="multipart/form-data" method="post">
  <fieldset>
     <h2>Load the gameData.json file</h2>
     <input type='file' id='fileinput'>
     <input type='button' id='btnLoad' value='Process' onclick='loadFile();'>
  </fieldset>
</form>
<script type="text/javascript">
  function loadFile() {
    var input, file, fr;
    if (typeof window.FileReader !== 'function') {
      alert("The file API isn't supported.");
      return;
    }
    input = document.getElementById('fileinput');
    if (!input) {
      alert("couldn't find the fileinput element.");
    }
    else if (!input.files) {
      alert("This browser doesn't seem to support the `files` property of file inputs.");
    }
    else if (!input.files[0]) {
      alert("Please select a file");
    }
    else {
      file = input.files[0];
      fr = new FileReader();
      fr.onload = receivedText;
      fr.readAsText(file);
    }
    function receivedText(e) {
      lines = e.target.result;
      var newArr = JSON.parse(lines);
      PROCESS.process(newArr)
    }
  }
</script>
</body>
</html>
